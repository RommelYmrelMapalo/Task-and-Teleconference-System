{% extends "base_public.html" %}
{% block title %}Sign Up{% endblock %}

{% block content %}
<div class="auth-container">
  <form method="POST" class="auth-box">
    <h3 class="text-center mb-4">Sign Up</h3>

    {# Flash Messages #}
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert 
                      {% if category == 'error' %}
                        alert-danger
                      {% else %}
                        alert-success
                      {% endif %}
                      alert-dismissible fade show flash-message"
               role="alert">
            {{ message }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <div class="form-group">
      <label for="email">Email Address</label>
      <input 
        type="email" 
        class="form-control" 
        id="email" 
        name="email" 
        placeholder="Enter email"
        required
      />
    </div>

    <div class="form-group">
      <label for="firstname">First Name</label>
      <input 
        type="text" 
        class="form-control" 
        id="firstname" 
        name="firstname" 
        placeholder="Enter First Name"
        required
      />
    </div>

    <div class="form-group">
      <label for="password1">Password</label>
      <input 
        type="password" 
        class="form-control" 
        id="password1" 
        name="password1" 
        placeholder="Enter password"
        required
      />
    </div>

    <div class="form-group">
      <label for="password2">Confirm Password</label>
      <input 
        type="password" 
        class="form-control" 
        id="password2" 
        name="password2" 
        placeholder="Confirm password"
        required
      />
    </div>

    <button type="submit" class="btn btn-primary btn-block">SIGN UP</button>

    <div class="mt-3 text-center">
      Already have an account? <a href="/login">Login</a>
    </div>
  </form>
</div>

{# Auto Dismiss Script #}
<script>
window.addEventListener("DOMContentLoaded", () => {
  const flashes = document.querySelectorAll(".flash-message");
  if (!flashes.length) return;

  setTimeout(() => {
    flashes.forEach(el => {
      el.style.transition = "opacity .4s ease, transform .4s ease";
      el.style.opacity = "0";
      el.style.transform = "translateY(-6px)";
      setTimeout(() => el.remove(), 400);
    });
  }, 5000);
});
</script>

{% endblock %}