{% extends "base_public.html" %}
{% block title %}Admin Login{% endblock %}

{% block content %}

<div class="auth-container">
  <form method="POST" class="auth-box">
    <h3 class="text-center mb-4">Admin Login</h3>

    {# Flash Messages #}
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert 
                      {% if category == 'error' %}
                        alert-danger
                      {% else %}
                        alert-success
                      {% endif %}
                      alert-dismissible fade show flash-message"
               role="alert">
            {{ message }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <div class="form-group">
      <label for="email">Email Address</label>
      <input 
        type="email" 
        class="form-control" 
        id="email" 
        name="email" 
        placeholder="Enter email" 
        required
      >
    </div>

    <div class="form-group">
      <label for="password">Password</label>
      <input 
        type="password" 
        class="form-control" 
        id="password" 
        name="password" 
        placeholder="Enter password" 
        required
      >
    </div>

    <button type="submit" class="btn btn-primary btn-block">LOGIN</button>

    <div class="mt-3 text-center">
      <a href="/login">Back to User Login</a>
    </div>
  </form>
</div>

{# Auto Dismiss Flash Script #}
<script>
window.addEventListener("DOMContentLoaded", () => {
  const flashes = document.querySelectorAll(".flash-message");
  if (!flashes.length) return;

  setTimeout(() => {
    flashes.forEach(el => {
      el.style.transition = "opacity .4s ease, transform .4s ease";
      el.style.opacity = "0";
      el.style.transform = "translateY(-6px)";
      setTimeout(() => el.remove(), 400);
    });
  }, 5000);
});
</script>

{% endblock %}